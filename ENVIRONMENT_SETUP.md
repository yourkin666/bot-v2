# 🔧 环境配置指南

## 📋 概述

为了保护敏感信息（如 API 密钥），本项目使用环境变量进行配置管理。所有敏感配置都存储在 `.env` 文件中，该文件不会被提交到代码仓库。

## 🚀 快速开始

### 1. 复制环境变量模板

```bash
cp .env.example .env
```

### 2. 编辑 `.env` 文件

使用您喜欢的编辑器打开 `.env` 文件：

```bash
nano .env
# 或
code .env
```

### 3. 填入您的配置

#### 🤖 AI 模型服务配置

- `OPENAI_API_KEY`: 主要 AI 模型的 API 密钥（硅基流动）
- `DEEPSEEK_API_KEY`: 深度思考模型的 API 密钥（DeepSeek R1）

#### 🔍 搜索服务配置

- `SEARCH_API_KEY`: 联网搜索功能的 API 密钥

#### 🔐 安全配置

- `JWT_SECRET`: 用于用户认证的 JWT 密钥（请使用强密码）
- `SESSION_SECRET`: 会话密钥（请使用强密码）

#### 📧 邮件服务配置

- `SMTP_USER`: 您的邮箱地址
- `SMTP_PASS`: 您的邮箱授权码（不是登录密码）
- `EMAIL_FROM`: 发件人邮箱地址

## 🔑 获取 API 密钥

### 硅基流动 API 密钥

1. 访问 [硅基流动官网](https://siliconflow.cn/)
2. 注册账户并登录
3. 在控制台创建 API 密钥
4. 复制密钥到对应的环境变量

### 搜索服务 API 密钥

1. 根据您使用的搜索服务提供商获取 API 密钥
2. 将密钥设置到 `SEARCH_API_KEY`

### QQ 邮箱授权码获取

1. 登录 QQ 邮箱
2. 设置 → 帐户 → POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV 服务
3. 开启"POP3/SMTP 服务"
4. 获取授权码（不是 QQ 密码）

## ⚡ 启动应用

配置完成后，启动应用：

```bash
npm start
# 或
node server.js
```

如果配置正确，您会看到：

```
✅ 所有环境变量配置完成
🚀 AI小子后端服务启动成功！
```

## ⚠️ 安全注意事项

1. **绝对不要**将 `.env` 文件提交到代码仓库
2. 定期更换 API 密钥和密码
3. 生产环境使用强密码
4. 不要在代码中硬编码敏感信息

## 🆘 故障排除

### 缺少环境变量

如果看到类似错误：

```
❌ 缺少必需的环境变量:
   - OPENAI_API_KEY
   - SMTP_PASS
```

请检查您的 `.env` 文件，确保所有必需的变量都已设置。

### 邮件发送失败

1. 确认邮箱授权码正确
2. 检查 SMTP 配置
3. 确认邮箱服务商的 SMTP 设置

### API 调用失败

1. 验证 API 密钥是否有效
2. 检查网络连接
3. 确认 API 配额是否充足

## 📞 技术支持

如果遇到配置问题，请：

1. 检查日志输出
2. 验证环境变量设置
3. 参考本文档的故障排除部分

## 🔄 环境变量参考

完整的环境变量列表请参考 `.env.example` 文件。
